function handlePageSwitch(t){t="#"+t.split("#")[1],$("div.branding-container, ul.nav-pills>li").removeClass("active"),$('.branding[href="'+t+'"], ul.nav-pills>li>a[href="'+t+'"]').parent().addClass("active")}function checkNightmode(){var t=$.cookie("nightmode");void 0!=t&&null!=t||($.cookie("nightmode","false",{expires:365}),t=$.cookie("nightmode")),"false"==t?$('head link[rel="stylesheet"][href="css/nightmode.min.css"]').remove():$("head").append('<link rel="stylesheet" type="text/css" href="css/nightmode.min.css">')}function toggleNightmode(){var t=$.cookie("nightmode");"false"==t?$.cookie("nightmode","true",{expires:365}):$.cookie("nightmode","false",{expires:365}),checkNightmode()}function setView(t){$("#matchlist").addClass("hidden"),$("#match").addClass("hidden"),$("#world-ranking").addClass("hidden"),$("#legal-notice").addClass("hidden"),$("#matchlist-search").val(""),$("div.header").addClass("disabled"),t==ENUM_VIEW.NONE?($("body").children(".fixedHeader").each(function(){$(this).remove()}),null!=m_oDataTableRanking&&(m_oDataTableRanking.clear(),m_oDataTableRanking.destroy(),m_oDataTableRanking=null)):t==ENUM_VIEW.MATCH?($("#match").removeClass("hidden"),$("div.header").removeClass("disabled")):t==ENUM_VIEW.MATCHLIST?($("#matchlist").removeClass("hidden"),$("div.header").removeClass("disabled")):t==ENUM_VIEW.WORLD_RANKING?($("#world-ranking").removeClass("hidden"),$("div.header").removeClass("disabled")):t==ENUM_VIEW.LEGAL&&($("#legal-notice").removeClass("hidden"),$("div.header").removeClass("disabled"))}function getMaps(t){var e=new Array;return e[38]="Eternal Battlegrounds",e[94]=t.red+" Borderlands",e[95]=t.green+" Borderlands",e[96]=t.blue+" Borderlands",e[1099]=t.red+" Borderlands",e}function getMapColors(){var t=new Array;return t[38]="#333",t[94]="red",t[95]="green",t[96]="blue",t[1099]="red",t}function getWorlds(t){var e=new Array;e.red=null,e.green=null,e.blue=null,_WORLDS={};for(var a in t.series){var s=t.series[a];e[s.color]=s.world_name,_WORLDS[s.color]={name:s.world_name,id:s.world_id}}return e}function resolveSlug(t,e){$.ajax({url:"api/slug/"+t+"?"+$.now(),caching:!1,dataType:"json",complete:function(t){e(null!=t&&null!=t.responseJSON?t.responseJSON:null)},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger"),setView(ENUM_VIEW.MATCHLIST)}})}function setSpecificMatch(t){setLoading(!0),setView(ENUM_VIEW.NONE),$.ajax({url:"api/matchlist/single/"+t+"?"+$.now(),caching:!1,dataType:"json",complete:function(e){for(var a in e.responseJSON){var s=e.responseJSON[a];if(s.id==t){setMatch(s.id,s);break}}},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger"),setView(ENUM_VIEW.MATCHLIST)}})}function setWorldRanking(){setView(ENUM_VIEW.NONE),setLoading(!0),$.ajax({url:"api/worldranking?"+$.now(),dataType:"json",complete:function(t){m_oDataTableRanking=$("#table-world-ranking").DataTable({order:[[6,"desc"]],paging:!1,info:!1,searching:!0});for(var e in t.responseJSON){var a=t.responseJSON[e];for(var s in a.linkings){var r=a.linkings[s],o="",i=0;for(var l in r.partners)0==i&&(o+=", "),o+=r.partners[l].name,i++,i<r.partners.length&&(o+=", ");var n='<i class="famfamfam-flag-'+getFlagShort(a.arenanet_id)+'"></i> <b>'+a.name+"</b>";m_oDataTableRanking.row.add([n+o,r.matchcount.toString(),r.kills.toThousandSeparator(),r.deaths.toThousandSeparator(),(r.kills/r.matchcount).toFixed(2).toString(),(r.deaths/r.matchcount).toFixed(2).toString(),getKdr(r.kills,r.deaths)]).draw(!1)}}setView(ENUM_VIEW.WORLD_RANKING),setLoading(!1),new $.fn.dataTable.FixedHeader(m_oDataTableRanking,{})},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger")}})}function setAllMatchlist(){var t="#matchlist-container";setLoading(!0),$(t).html(""),resetView(),setView(ENUM_VIEW.NONE),$.ajax({url:"api/matchlist/all?"+$.now(),dataType:"json",complete:function(e){setView(ENUM_VIEW.NONE);var a="";for(var s in e.responseJSON){var r=e.responseJSON[s],o=moment.utc(r.start).format("YYYY.MM.DD");o!=a&&($(t).append("<h2>"+moment.utc(r.start).local().format("YYYY.MM.DD")+" - "+moment.utc(r.end).local().format("YYYY.MM.DD")+"</h2></div>"),a=o),setMatchlistMatchContainer(t,s,r)}setLoading(!1),setView(ENUM_VIEW.MATCHLIST)},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger")}})}function setCurrentMatchlistMainMenu(){var t="#menu-current-matchups";$.ajax({url:"api/matchlist/current?"+$.now(),dataType:"json",complete:function(e){for(var a in e.responseJSON){var s=e.responseJSON[a],r=s.arenanet_id.split("-")[1],o="1"==s.arenanet_id.split("-")[0]?"NA":"EU",i="#/matches/"+getLongestInArray(s.slugs)+"/";$(t).append('<li data-match-id="'+s.id+'" id="menu-'+a+'"></li>');var l='<a href="'+i+'"><b>'+o+"</b>/<b>T"+r+"</b> ",n=0;for(var d in s.worlds){var c=s.worlds[d];n>0&&(l+=" - "),l+='<i class="famfamfam-flag-'+getFlagShort(c.id)+'"></i> ',l+=c.name,n++}l+="</a>",$("#menu-"+a).append(l),$("#menu-"+a).click(function(){$("#current-matches-dropdown").dropdown("toggle")})}},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger")}})}function setCurrentMatchlist(){var t="#matchlist-container";$(t).html(""),setView(ENUM_VIEW.NONE),setLoading(!0),$.ajax({url:"api/matchlist/current?"+$.now(),dataType:"json",complete:function(e){setView(ENUM_VIEW.NONE);for(var a in e.responseJSON)setMatchlistMatchContainer(t,a,e.responseJSON[a]);setLoading(!1),setView(ENUM_VIEW.MATCHLIST)},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger")}})}function setMatchlistMatchContainer(t,e,a){var s=a.arenanet_id.split("-")[1],r="1"==a.arenanet_id.split("-")[0]?"NA":"EU",o=m_bDebug?e:"",i=new Array;i.push("T"+s),i.push("Tier"+s),i.push(r),i.push(a.start),i.push(a.end),i.push(moment(a.start).format("YYYY.MM.DD")),i.push(moment(a.end).format("YYYY.MM.DD"));var l="#/matches/"+getLongestInArray(a.slugs)+"/";$(t).append('<div id="'+e+'" class="list-group-item '+r.toLowerCase()+'"><div class="row"><div class="col-md-1"><div class="matchlist-eyecatcher"><span class="matchlist-region region-'+r.toLowerCase()+'">'+r+'</span><span class="matchlist-tier">Tier '+s+'</span></div></div><div class="col-md-9"><a class="match-container" data-match-id="'+a.id+'"></a></div><div class="col-md-2"><span class="matchlist-last-update pull-right" title="'+moment.utc(a.last_update).local().format("HH:mm:ss")+'">updated '+moment.utc(a.last_update).local().fromNow()+"</span>"+o+"</div></div></div>");var n='<div class="matchlist-worldlist">',d="",c=new Array;c.push(a.worlds.green),c.push(a.worlds.blue),c.push(a.worlds.red);for(var m in c){var h=c[m],p=parseInt(h.kills)/parseInt(h.deaths),u=p>=1?"success":1==p.toFixed(2)?"warning":"danger";n+='<div class="row"><div class="col-md-1 matchlist-world-kd">',n+='<span title="Kills: '+h.kills+" / Deaths: "+h.deaths+'" class="label label-'+u+'">KD: '+getKdr(h.kills,h.deaths)+"</span>";var g=getWidths(parseInt(h.kills),parseInt(h.deaths));if(n+='</div><div class="col-md-3 matchlist-stat-container"><div class="progress"><div class="progress-bar kills total '+h.world_id+' no-nightmode" title="kills" role="progressbar" style="width: '+g.kills+"; background-color: "+shadeColor(colorNameToHex(h.color),.3)+';"  >'+h.kills+'</div><div class="progress-bar '+h.world_id+' total deaths no-nightmode" style="width: '+g.deaths+"; background-color: "+shadeColor(colorNameToHex(h.color),-.3)+';" title="deaths">'+h.deaths+'</div></div></div><div class="col-md-8 matchlist-world-container"><b><i class="famfamfam-flag-'+getFlagShort(h.id)+'"></i> '+h.name+"</b>",i.push(h.name),null!=h.additional_worlds)for(var _ in h.additional_worlds)n+=", "+h.additional_worlds[_].name,i.push(h.additional_worlds[_].name);n+="</div></div>"}n+="</a></div>",$("#"+e+" a.match-container").append(n),$("#"+e+" div.matchlist-stat-container").append(d),$("#"+e).attr("data-search-query",i.join("#")),$("#"+e+" a.match-container").click(function(){window.location=l})}function setMatch(t,e){setView(ENUM_VIEW.NONE),setLoading(!0),resetView(),m_oHighchartsKills=new Highcharts.stockChart(getChartOptions()),$("#disable-flattening").removeClass("hidden"),$("#enable-flattening").removeClass("hidden");var a=m_bFlattening?"flattened":"unaltered";$.ajax({url:"api/match/"+t+"/"+a+"?"+$.now(),dataType:"json",complete:function(a){var s=a.responseJSON,r=0,o=getWorlds(s),i=getMaps(o),l=0,n=0,d=e.arenanet_id.split("-")[1],c="1"==e.arenanet_id.split("-")[0]?"NA":"EU",m=getLongestInArray(e.slugs);$("div#match > a.get-shortlink").attr("data-match-slug",m),$("#match-title").html(moment(s.match_start).format("YYYY.MM.DD")+" - "+moment(s.match_end).format("YYYY.MM.DD")+" <small>"+c+" Tier "+d+"</small>"),$("#match-last-update").html("Last updated at "+moment.utc(s.last_update).local().format("HH:mm:ss")+" ("+moment.utc(s.last_update).local().fromNow()+")"),m_oHighchartsKills.setTitle({text:o.green+" / "+o.blue+" / "+o.red}),$("#disable-flattening").addClass("hidden"),$("#enable-flattening").addClass("hidden"),s.flattening_requested&&s.flattened?$("#disable-flattening").removeClass("hidden"):s.flattening_requested||$("#enable-flattening").removeClass("hidden");var h=0,p=s.series[Object.keys(s.series)[0]];for(var u in p.series_items){var g=(p.series_items[u],0),_=0;for(var v in s.series)oSeries=s.series[v],g+=parseInt(oSeries.series_items[h].kills),_+=parseInt(oSeries.series_items[h].deaths);g>l&&(l=g),_>n&&(n=_),h++}var f=l;n>f&&(f=n),n*=-1,m_oHighchartsKills.yAxis[0].update({min:f*-1-100,max:0}),m_oHighchartsKills.yAxis[1].update({min:0,max:f+100});for(var v in s.series)setSeries(s.series[v],o,i,r,"Kills"),r++;for(var v in s.series)setSeries(s.series[v],o,i,r,"Deaths"),r++;$("#reload-chart").attr("data-match-id",t),$("#disable-flattening").attr("data-match-id",t),$("#enable-flattening").attr("data-match-id",t),s.flattened&&setMessage("Due to issues with the <strong>Guild Wars 2 API</strong> the data of this match has been flattened to be more precise.<br />Please note, that this has altered the timeline of when kills occured. The kill and death counts are correct. I know it's not pretty, but that's as much as i can do ðŸ”¥.","warning"),setStatisticsView(s),initMatchStatistics(s,e),setStatistics(-1),m_oHighchartsKills.redraw(),setLoading(!1),setView(ENUM_VIEW.MATCH)},error:function(t,e,a){setMessage("<b>"+e+"</b><br />"+a,"danger")}})}function setStatisticsView(t){_STATISTICS_VIEW={worlds:{},timeslots:{}};for(var e in t.series){var a=t.series[e],s=a.map_id,r=a.world_id;_STATISTICS_VIEW.worlds[r]||(_STATISTICS_VIEW.worlds[r]={world_name:a.world_name,world_id:a.world_id,color:a.color,maps:{}}),_STATISTICS_VIEW.worlds[r].maps[s]||(_STATISTICS_VIEW.worlds[r].maps[s]={map_id:a.map_id,kills:0,deaths:0});for(var o in a.series_items){var i=a.series_items[o],l=i.timeslot_id.toString();_STATISTICS_VIEW.timeslots[l]||(_STATISTICS_VIEW.timeslots[l]={timeslot_id:i.timeslot_id,timeslot_start:i.timeslot_start,timeslot_end:i.timeslot_end,worlds:{}}),_STATISTICS_VIEW.timeslots[l].worlds[r]||(_STATISTICS_VIEW.timeslots[l].worlds[r]={world_name:a.world_name,world_id:a.world_id,color:a.color,maps:{}}),_STATISTICS_VIEW.timeslots[l].worlds[r].maps[s]||(_STATISTICS_VIEW.timeslots[l].worlds[r].maps[s]={map_id:a.map_id,kills:0,deaths:0}),_STATISTICS_VIEW.worlds[r].maps[s].kills+=parseInt(i.kills),_STATISTICS_VIEW.worlds[r].maps[s].deaths+=parseInt(i.deaths),_STATISTICS_VIEW.timeslots[l].worlds[r].maps[s].kills+=parseInt(i.kills),_STATISTICS_VIEW.timeslots[l].worlds[r].maps[s].deaths+=parseInt(i.deaths)}}}function setMessage(t,e){$("#message-container").append('<div class="alert alert-'+e+' alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+t+"</div>")}function clearMessages(){$("#message-container").html("")}function setSeries(t,e,a,s,r){var o="Deaths"==r;m_oHighchartsKills.addSeries({name:"["+r+"] "+t.world_name+" on "+a[t.map_id],yAxis:o?0:1,animation:!1,type:"area",step:"center",color:getMapChartColor(t.color,t.map_id,o)});for(var i in t.series_items){var l=t.series_items[i],n=o?parseInt(l.deaths)*-1:parseInt(l.kills),d=null;l.flattened&&0==s&&(d={symbol:"url(img/warning_marker.png)"}),m_oHighchartsKills.series[s].addPoint({x:Date.parse(moment.utc(l.timeslot_start).local().format()),y:n,name:"<strong>"+moment.utc(l.timeslot_start).local().format("YYYY/MM/DD | dddd")+"</strong><br />"+moment.utc(l.timeslot_start).local().format("HH:mm:ss ")+" to "+moment.utc(l.timeslot_end).local().format("HH:mm:ss "),world:t.world_id,map:t.map_id,kills:parseInt(l.kills),deaths:parseInt(l.deaths),flattened:l.flattened,timeslot_id:l.timeslot_id,seriesindex:s,marker:d},!1)}}function initMatchStatistics(t,e){var a="#match-statistics-container",s=new Array,r=getMapColors();$(a).html("");for(var o in t.series){var i=t.series[o],l=i.world_id;"undefined"==typeof s[l]&&(s[l]={world_id:i.world_id,color:i.color,world_name:i.world_name,maps:new Array}),s[l].maps[i.map_id]={map_id:i.map_id}}var n='<div class="row">';for(var d in s){oWorld=s[d],n+='<div class="col-md-4 world-container '+oWorld.world_id+'" data-world-name="'+oWorld.world_name+'">',n+='<div class="row"><div class="col-md-9"><h4>'+oWorld.world_name+'</h4><span class="copy-statistics copy-'+oWorld.world_id+'" title="Copy statistics to clipboard"><i class="glyphicon glyphicon-copy"></i></span></div><div class="col-md-3"><h4 class=" world-kd '+oWorld.world_id+'"></h4></div></div><h6>';var c=0;for(var m in e.worlds[oWorld.color].additional_worlds)c++,n+=e.worlds[oWorld.color].additional_worlds[m].name,c<Object.keys(e.worlds[oWorld.color].additional_worlds).length&&(n+=", ");n+="&nbsp;</h6>";for(var h in oWorld.maps){var p=oWorld.maps[h],u="38"==p.map_id?"EBG":"Border";n+='<div class="row kd" data-world="'+oWorld.world_id+'" data-map-id="'+h+'" data-color="'+r[p.map_id]+'" data-world-name="'+oWorld.world_name+'" data-map-name="'+u+'">',n+='<div class="col-md-2" style="color: '+r[p.map_id]+'">'+u+'</div><div class="col-md-7"><div class="progress"><div class="progress-bar '+h+" "+oWorld.world_id+' kills no-nightmode" title="kills" role="progressbar" style="width: 50%; background-color: '+getMapChartColor(oWorld.color,p.map_id,!1)+';"  ></div><div class="progress-bar '+h+" "+oWorld.world_id+' deaths no-nightmode" style="width: 50%; background-color: '+getMapChartColor(oWorld.color,p.map_id,!0)+';" title="deaths"></div></div></div><div class="col-md-3 '+h+" "+oWorld.world_id+' kdr"></div>',n+="</div>"}n+='<div class="row kd-total" data-world="'+oWorld.world_id+'"><div class="col-md-2"><strong>Total</strong></div><div class="col-md-7"><div class="progress"><div class="progress-bar kills total '+oWorld.world_id+'  no-nightmode" title="kills" role="progressbar" style="width: 50%; background-color: '+shadeColor(colorNameToHex(oWorld.color),.3)+';"  ></div><div class="progress-bar '+oWorld.world_id+' total deaths no-nightmode" style="width: 50%; background-color: '+shadeColor(colorNameToHex(oWorld.color),-.3)+';" title="deaths"></div></div></div><div class="col-md-3"><strong><span class="kdr total '+oWorld.world_id+' "></span></strong></div></div>',n+="</div>"}n+="</div>",$(a).append(n),$("span.copy-statistics").click(function(){$(this).addClass("highlight"),setTimeout(function(){$(".highlight").removeClass("highlight")},1e3)});for(var d in s)$(".copy-"+s[d].world_id).attr("data-clipboard-text",getClipboardWorld(s[d].world_id,t)),new Clipboard(".copy-"+s[d].world_id)}function setStatistics(t){if(t==-1)for(var e in _STATISTICS_VIEW.worlds){var a=_STATISTICS_VIEW.worlds[e];setStatisticForWorld(a)}else for(var e in _STATISTICS_VIEW.timeslots[t].worlds){var a=_STATISTICS_VIEW.timeslots[t].worlds[e];setStatisticForWorld(a)}}function setStatisticForWorld(t){var e=0,a=0;for(var s in t.maps){var r=t.maps[s],o=getWidths(r.kills,r.deaths);$(".progress-bar."+t.world_id+"."+r.map_id+".kills").css("width",o.kills).text(r.kills),$(".progress-bar."+t.world_id+"."+r.map_id+".deaths").css("width",o.deaths).text(r.deaths),$(".kdr."+t.world_id+"."+r.map_id).html("&empty;"+getKdr(r.kills,r.deaths)),e+=r.kills,a+=r.deaths}var i=getWidths(e,a);$(".progress-bar."+t.world_id+".total.kills").css("width",i.kills).text(e),$(".progress-bar."+t.world_id+".total.deaths").css("width",i.deaths).text(a),$(".world-kd."+t.world_id).html("&empty;"+getKdr(e,a)),$(".kdr.total."+t.world_id).html("&empty;"+getKdr(e,a))}function getClipboardWorld(t,e){var a=_STATISTICS_VIEW.worlds[t],s=0,r=0,o=new Array,i=a.world_name,l=getMapColors();for(var n in a.maps){var d=a.maps[n],c=parseInt(d.kills),m=parseInt(d.deaths),h=(a.world_name,"38"==d.map_id?"EBG":"BL"),p=l[d.map_id];s+=m,r+=c;var u=getKdr(c,m)+" k/d ("+c+"/"+m+") on ";p.indexOf("#")==-1&&(u+=p.toProperCase()+" "),u+=h,o.push(u)}var g=i+": "+getKdr(r,s)+" k/d ("+r+"/"+s+") | ";return g+o.join(" | ")+" - updated "+moment.utc(e.last_update).local().fromNow()}function getClipboardWorldAndTimeslot(t,e){var a=_STATISTICS_VIEW.timeslots[e].worlds[t],s=_STATISTICS_VIEW.timeslots[e],r=0,o=0,i=new Array,l=a.world_name,n=getMapColors();for(var d in a.maps){var c=a.maps[d],m=parseInt(c.kills),h=parseInt(c.deaths),p=(a.world_name,"38"==c.map_id?"EB":"BL"),u=n[c.map_id];r+=h,o+=m;var g=getKdr(m,h)+"KD ("+m+"/"+h+") @ ";u.indexOf("#")==-1&&(g+=u.toProperCase()+" "),g+=p,i.push(g)}var _=l+"("+moment.utc(s.timeslot_start).local().format("HH:mm")+"-"+moment.utc(s.timeslot_end).local().format("HH:mm")+"): "+getKdr(o,r)+" k/d ("+o+"/"+r+") | ";return _+i.join(" | ")}function resetView(){void 0!=m_oHighchartsKills&&null!=m_oHighchartsKills&&(m_oHighchartsKills.destroy(),m_oHighchartsKills=void 0,$("main-chart-container").html("")),_STATISTICS_VIEW=null}function getFlagShort(t){var e=t.substring(0,2);switch(e){case"10":return"us";case"20":return"eu";case"21":return"fr";case"22":return"de";case"23":return"es"}}function setLoading(t){$("#loading-container").removeClass("hidden"),t?clearMessages():$("#loading-container").addClass("hidden")}function getChartOptions(){Highcharts.setOptions({global:{useUTC:!1}});var t={chart:{backgroundColor:"transparent",renderTo:"main-chart-container",height:500,zoomType:"xy",spacingLeft:0,spacingRight:0},rangeSelector:{enabled:!1},scrollbar:{liveRedraw:!1},navigator:{adaptToUpdatedData:!1},xAxis:{type:"datetime",range:864e5,labels:{align:"left",formatter:function(){var t=moment.utc(this.value).add(15,"minutes").local().format("HH:mm");return t}}},title:{text:" "},yAxis:[{allowDecimals:!1,title:{text:"deaths"},opposite:!0,gridLineWidth:0,visible:!1,labels:{formatter:function(){return Math.abs(this.value)}}},{allowDecimals:!1,opposite:!0,gridLineWidth:0,labels:{formatter:function(){return Math.abs(this.value)}}}],plotOptions:{series:{animation:!1},area:{stacking:"normal",animation:!1,marker:{},point:{events:{click:function(){setCopyModal(this.timeslot_id)}}}}},series:[]};return t}function setCopyModal(t){$("#copy-timeslot-green").attr("data-timeslot-id",t),$("#copy-timeslot-blue").attr("data-timeslot-id",t),$("#copy-timeslot-red").attr("data-timeslot-id",t),$("#copy-timeslot-green-name").text(_WORLDS.green.name),$("#copy-timeslot-green").attr("data-world-id",_WORLDS.green.id),$("#copy-timeslot-blue-name").text(_WORLDS.blue.name),$("copy-timeslot-blue").attr("data-world-id",_WORLDS.blue.id),$("#copy-timeslot-red-name").text(_WORLDS.red.name),$("#copy-timeslot-red").attr("data-world-id",_WORLDS.red.id),$("#copy-timeslot").css("top",_CURSOR.y).css("left",_CURSOR.x-30);var e=_STATISTICS_VIEW.timeslots[t];$("#copy-timeslot-header").html(moment.utc(e.timeslot_start).local().format("HH:mm")+"-"+moment.utc(e.timeslot_end).local().format("HH:mm")),new Clipboard("#copy-timeslot-red"),new Clipboard("#copy-timeslot-green"),new Clipboard("#copy-timeslot-blue"),$("#copy-timeslot").removeClass("hidden")}function newGuid(){return(S4()+S4()+"-"+S4()+"-4"+S4().substr(0,3)+"-"+S4()+"-"+S4()+S4()+S4()).toLowerCase()}function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function getMapChartColor(t,e,a){var s=0,r=1;switch(e){case"34":s=.09;break;case"95":s=.15;break;case"96":s=.3;break;case"1099":case"97":s=.45}s*=r,a&&(s=-.75+s);var o=shadeColor(colorNameToHex(t),s);return o}function colorNameToHex(t){var e={blue:"#0000ff",green:"#008000",red:"#ff0000"};return"undefined"!=typeof e[t.toLowerCase()]&&e[t.toLowerCase()]}function shadeColor(t,e){var a=parseInt(t.slice(1),16),s=e<0?0:255,r=e<0?e*-1:e,o=a>>16,i=a>>8&255,l=255&a;return"#"+(16777216+65536*(Math.round((s-o)*r)+o)+256*(Math.round((s-i)*r)+i)+(Math.round((s-l)*r)+l)).toString(16).slice(1)}function blendColors(t,e,a){var s=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),o=s>>16,i=s>>8&255,l=255&s,n=r>>16,d=r>>8&255,c=255&r;return"#"+(16777216+65536*(Math.round((n-o)*a)+o)+256*(Math.round((d-i)*a)+i)+(Math.round((c-l)*a)+l)).toString(16).slice(1)}function getWidths(t,e){var a=null;return a=0==t&&0==e?{kills:"50%",deaths:"50%"}:{kills:(100*t/(t+e)).toString()+"%",deaths:(100*e/(t+e)).toString()+"%"}}function getKdr(t,e){return t>0?e>0?parseFloat(Math.round(t/e*100)/100).toFixed(2):"&infin;":"1.00"}function getParameterByName(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function checkParameter(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"([^&#]*)"),a=e.exec(location.search);return null!==a}function getLongestInArray(t){return t.sort(function(t,e){return e.length-t.length})[0]}function cmpColor(t,e){return"red"==t.color?3:"blue"==t.color?2:1}var m_oHighchartsKills,m_bDebug=!1,m_oDataTableRanking=null,m_bFlattening=!0,_STATISTICS_VIEW=null,_CURSOR=null,_WORLDS=null;$(function(){checkNightmode(),new Clipboard("#copy-shortlink"),setCurrentMatchlistMainMenu();var t=$.sammy(function(){this.get("#/matches/current/",function(t){setCurrentMatchlist()}),this.get("#/matches/archive/",function(t){setAllMatchlist()}),this.get("#/worldranking/",function(t){setWorldRanking()}),this.get("#/matches/:slug/",function(t){var e=this.params.slug;resolveSlug(e,function(t){null!=t?setSpecificMatch(t.match_id):window.location="#/matches/current/"})}),this.get("#/legal/",function(t){setView(ENUM_VIEW.NONE),setLoading(!0),$("#legal-notice").load("legal.html"),setLoading(!1),setView(ENUM_VIEW.LEGAL)}),this.bind("location-changed",function(t,e){handlePageSwitch(t.currentTarget.baseURI)})});t.run("#/matches/current/"),$("#current-year").text(moment().format("YYYY"))});var ENUM_VIEW={NONE:0,MATCHLIST:1,MATCH:2,WORLD_RANKING:3,LEGAL:4};$(".nightmode-switch").click(function(){toggleNightmode()}),$("#modal-shortlink").on("shown.bs.modal",function(t){var e=$(t.relatedTarget),a=(e.attr("data-match-slug"),window.location.href);$("#shortlink-textbox").val(a),$("#shortlink-textbox").select()}),$("#reload-chart").click(function(){var t=$(this).attr("data-match-id");setSpecificMatch(t)}),$("#disable-flattening").click(function(){m_bFlattening=!1;var t=$(this).attr("data-match-id");setSpecificMatch(t)}),$("#enable-flattening").click(function(){m_bFlattening=!0;var t=$(this).attr("data-match-id");setSpecificMatch(t)}),$(".copy-timeslot").click(function(){var t=$(this).attr("data-timeslot-id"),e=$(this).attr("data-world-id");$(this).attr("data-clipboard-text",getClipboardWorldAndTimeslot(e,t)),$("#copy-timeslot").addClass("hidden")}),$("#copy-timeslot-cancel").click(function(){$("#copy-timeslot").addClass("hidden"),new Clipboard(this)}),$("body").click(function(){$("#copy-timeslot").addClass("hidden")}),Highcharts.Point.prototype.tooltipFormatter=function(t){var e=this;e.series;0==e.seriesindex&&setStatistics(e.timeslot_id);var a=e.flattened&&0==e.seriesindex?"<br />! This value has been altered by the error correction mechanism !":"";return a},$("#main-chart-container").mouseleave(function(){setStatistics(-1)}),$(document).on("mousemove",function(t){_CURSOR={x:t.pageX,y:t.pageY}}),$("#matchlist-search").on("input",function(){var t=$(this).val().toUpperCase();$("#matchlist-container > div").removeClass("hidden"),$("#matchlist-container > div").each(function(){var e=$(this).attr("data-search-query").toUpperCase();e.indexOf(t)==-1&&$(this).addClass("hidden")})}),$("#matchlist-search").keyup(function(t){27==t.keyCode&&($(this).val(""),$("#matchlist-container > div").removeClass("hidden"))}),String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},Number.prototype.toThousandSeparator=function(){return this.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")};