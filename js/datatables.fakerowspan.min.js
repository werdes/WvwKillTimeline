(function(r){ShowedDataSelectorModifier={order:"current",page:"current",search:"applied"},GroupedColumnsOrderDir="asc";var e=function(e,t){this.table=e.table(),this.columnsForGrouping=t,this.orderOverrideNow=!1,this.order=[],self=this,r(document).on("order.dt",function(r,e){self.orderOverrideNow||self._updateOrderAndDraw(),self.orderOverrideNow=!1}),r(document).on("draw.dt",function(r,e){self._mergeCells()}),this._updateOrderAndDraw()};e.prototype={_getOrderWithGroupColumns:function(r,e){void 0===e&&(e=GroupedColumnsOrderDir);var t=this,o=this.columnsForGrouping.map(function(r){return t.table.column(r).index()}),n=r.filter(function(r){return o.indexOf(r[0])>=0}),i=r.filter(function(r){return o.indexOf(r[0])<0}),u=n.map(function(r){return r[0]}),a=o.map(function(r){var t=u.indexOf(r);return t>=0?[r,n[t][1]]:[r,e]});return a.push.apply(a,i),a},_getInjectedMonoSelectWorkaround:function(r){if(1===r.length){var e=r[0][0],t=this.order.map(function(r){return r[0]}),o=t.indexOf(e);if(o>=0)return[[e,this._toogleDirection(this.order[o][1])]]}return r},_mergeCells:function(){var r=this.table.columns(this.columnsForGrouping,ShowedDataSelectorModifier).indexes().toArray(),e=this.table.rows(ShowedDataSelectorModifier)[0].length;this._mergeColumn(0,e-1,r)},_mergeColumn:function(e,t,o){var n=o.slice();currentColumn=n.shift(),currentColumn=this.table.column(currentColumn,ShowedDataSelectorModifier);var i,u=currentColumn.nodes(),a=currentColumn.data(),d=e;for(i=e+1;i<=t;++i)a[i]===a[d]?r(u[i]).hide():(r(u[d]).show(),r(u[d]).attr("rowspan",i-1-d+1),n.length>0&&this._mergeColumn(d,i-1,n),d=i);r(u[d]).show(),r(u[d]).attr("rowspan",i-1-d+1),n.length>0&&this._mergeColumn(d,i-1,n)},_toogleDirection:function(r){return"asc"==r?"desc":"asc"},_updateOrderAndDraw:function(){this.orderOverrideNow=!0;var e=this.table.order();e=this._getInjectedMonoSelectWorkaround(e),this.order=this._getOrderWithGroupColumns(e),this.table.order(r.extend(!0,Array(),this.order)),this.table.draw()}},r.fn.dataTable.RowsGroup=e,r.fn.DataTable.RowsGroup=e,r(document).on("init.dt",function(t,o){if("dt"===t.namespace){var n=new r.fn.dataTable.Api(o);(o.oInit.rowsGroup||r.fn.dataTable.defaults.rowsGroup)&&(options=o.oInit.rowsGroup?o.oInit.rowsGroup:r.fn.dataTable.defaults.rowsGroup,new e(n,options))}})})(jQuery);