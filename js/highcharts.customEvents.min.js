(function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)})(function(t){"use strict";function e(t){return"[object Array]"===Object.prototype.toString.call(t)}var n,i,s,a,r="dblclick",o="touchstart",l="click",d=t.each,u=t.pick,c=t.wrap,p=t.merge,v=t.addEvent,h=t.isTouchDevice,b=(t.isObject,t.isNumber),m=t.getOptions().plotOptions,f=(t.Axis&&t.Axis.prototype,t.PlotLineOrBand&&t.PlotLineOrBand.prototype),P=t.seriesTypes,w=t.Series&&t.Series.prototype;f&&c(f,"render",function(t){var e=this.options&&this.options.events;return e&&(e=!1),t.apply(this,Array.prototype.slice.call(arguments,1))}),w&&c(w,"init",function(t,e,n){var i=e.options,s=i.plotOptions,a=i.plotOptions.series,r=p(a,s[this.type],n),o=r&&r.events,l=r&&r.point&&r.point.events;n.events={},n.point={events:{}},o&&(n.events={legendItemClick:o&&o.legendItemClick}),l&&(n.point.events={legendItemClick:l&&l.legendItemClick}),n.customEvents={series:o,point:l},t.apply(this,Array.prototype.slice.call(arguments,1))}),t.Chart.prototype.customEvent={getEventsProtoMethods:function(){return[[t.Tick,["addLabel"]],[t.Axis,["render"]],[t.Axis,["drawCrosshair"]],[t.Chart,["setTitle"]],[t.Legend,["renderItem"]],[t.PlotLineOrBand,["render"]],[t.Series,["drawPoints","drawDataLabels"]],[P.column,["drawPoints","drawDataLabels"]],[P.bar,["drawPoints","drawDataLabels"]],[P.pie,["drawPoints","drawDataLabels"]],[P.bubble,["drawPoints","drawDataLabels"]],[P.columnrange,["drawPoints","drawDataLabels"]],[P.arearange,["drawPoints","drawDataLabels"]],[P.areasplinerange,["drawPoints","drawDataLabels"]],[P.errorbar,["drawPoints","drawDataLabels"]],[P.boxplot,["drawPoints","drawDataLabels"]],[P.flags,["drawPoints","drawDataLabels"]],[P.heatmap,["drawPoints","drawDataLabels"]],[P.xrange,["drawPoints","drawDataLabels"]],[P.candlestick,["drawPoints","drawDataLabels"]],[P.sunburst,["drawPoints","drawDataLabels"]]]},init:function(){var e=this.getEventsProtoMethods();d(e,function(e){t.isArray(e)&&(s=e[0]&&e[0].prototype,a=e[1],s&&d(a,function(t){i.attach(s,t)}))})},attach:function(t,e){c(t,e,function(t,s){var a,r,o,l={events:n,element:n};if(a=t.apply(this,Array.prototype.slice.call(arguments,1)),l=i.eventElement[e].call(this,s),!l.events&&!l.eventsSubtitle&&!l.eventsPoint)return a;if(l.eventsPoint)for(r=l.elementPoint.length,o=0;o<r;o++)if(l.elementPoint[o]){var d=u(l.elementPoint[o].graphic,l.elementPoint[o]);d&&d!==n&&i.add(d,l.eventsPoint,l.elementPoint[o],l,!0)}return l.eventsSubtitle&&i.add(l.elementSubtitle,l.eventsSubtitle,l,this),l.eventsStackLabel&&i.add(l.elementStackLabel,l.eventsStackLabel,l,this),i.add(l.element,l.events,l,this),a})},add:function(t,e,n,i,s){var a=i.eventObject||n.eventObject,d=n.isSeries||i.isSeries;if(!t||!t.element)return!1;for(var u in e)(function(i){if(e.hasOwnProperty(i)&&!t[i]){if(h&&i===r){var u=!1;v(t.element,o,function(t){if(t.stopPropagation(),t.preventDefault(),d&&!a.directTouch){var r=a.chart,o=r.pointer.normalize(t);n=a.searchPoint(o,1===a.kdDimensions)||n,t.point=n}return(a&&!s||b(a.value))&&(a.value=n.textStr,n=a),n&&n.textStr&&(n.value=n.textStr),n.drilldown&&n.doDrilldown(void 0,void 0,t),u?(clearTimeout(u),u=null,e[i].call(n,t)):u=setTimeout(function(){u=null,e[l].call(n,t)},300),!1})}else v(t.element,i,function(t){if(t.stopPropagation(),t.preventDefault(),d){var r=a.chart,o=r.pointer.normalize(t);n=a.searchPoint(o,1===a.kdDimensions)||n,t.point=n}return(a&&!s||a&&b(a.value))&&(a.value=n.textStr||a.value,n=a),n&&n.textStr&&(n.value=n.textStr),n.drilldown&&n.doDrilldown(void 0,void 0,t),e[i].call(n,t),!1});t[i]=function(){return!0}}})(u)},eventElement:{addLabel:function(){var t,n,i=this.parent,s=this.axis,a=s.options,r=a.labels&&a.labels.events,o=[this.label];if(i)for(var l=this;l;){if(e(l))for(t=l.length,n=0;n<t;n++)o.push(l[n].label);else o.push(l.label);l=l.parent}return{eventsPoint:r,elementPoint:o,eventObject:{axis:s,isFirst:this.isFirst,isLast:this.isLast,chart:s.chart,dateTimeLabelFormat:a.dateTimeLabelFormats,value:this.pos}}},setTitle:function(){var t=this.options.title&&this.options.title.events,e=this.title,n=this.options.subtitle&&this.options.subtitle.events,i=this.subtitle;return{events:t,element:e,eventsSubtitle:n,elementSubtitle:i}},drawDataLabels:function(){var t=this.dataLabelsGroup;return{events:t?this.options.dataLabels.events:n,element:t?this.dataLabelsGroup:n}},render:function(){var t,e,n,i,s,a,r=this.options.stackLabels;return this.axisTitle&&(t=this.options.title.events,e=this.axisTitle),r&&r.enabled&&(n=r.events,i=this.stacks,s=r.events,a=this.stackTotalGroup),{events:t,element:e,eventsPoint:n,elementPoint:i,eventsStackLabel:s,elementStackLabel:a}},drawPoints:function(){var t,e=this.options,n=this.type,i=e.customEvents?e.customEvents.series:e.events,s=this.group,a=e.customEvents?e.customEvents.point:e.point.events;return t=m[n]&&m[n].marker&&!this.bubblePadding?[this.markerGroup]:this.points,this.kdTree||this.buildingKdTree||this.buildKDTree(),{events:i,element:s,eventsPoint:a,elementPoint:t,eventObject:this,isSeries:!0}},renderItem:function(t){return{events:this.options.itemEvents,element:t.legendGroup,eventObject:t}},drawCrosshair:function(){var t=this.options.crosshair;return{events:t&&t.events,element:this.cross}}}},i=t.Chart.prototype.customEvent,i.init()});